# AGENT.md

## このアプリの目的

* 開発者本人が快適に使える **iPad専用イラスト制作ツール** を作る。
* 商用や公開を目指さず、**自分の作業フローに最適化したツール**として育てる。

---

## 開発方針

* 🚀 機能は **小さく作って小さく育てる**
* ✏️ **描き心地（レイテンシ・ストロークの気持ちよさ）を最優先**
* 🧱 構造はシンプルに保ち、あとから差し替えやすくする
* 🌱 「必要になってから作る」を徹底し、過剰設計しない
* 🔒 完全ローカル・個人利用前提で、外部サービス連携はしない

---

## 実装上のガイドライン

### 描画周り

* 初期実装は **PencilKit** を使用し、まずは「普通に描ける」状態を最優先。
* レイヤやブレンドモードなど、高度な要件が増えたら、その部分だけ **Metal / Core Graphics** で差し替えを検討。
* パフォーマンスに問題が出るまでは、読みやすいコードを優先してよい。

### UI/UX

* ツールバーやレイヤ一覧など、UIはシンプルかつ最小限に。
* 片手で持って、もう片方の手でApple Pencilを持つ使い方を想定。
* ジェスチャ（ピンチズーム、パン）は可能な範囲で対応。

### データ構造

* `IllustrationDocument` をキャンバス全体の状態（レイヤ配列・キャンバスサイズ・背景色など）の単位とする。
* 各 `Layer` は描画内容（画像 or テクスチャ）と状態（表示可否・不透明度・ブレンドモード）を持つ。
* Undo/Redo は「ストローク単位」で管理することを基本としつつ、実装の負荷に応じて簡略化してもよい。

---

## やらないこと（当面）

* App Store での公開
* 他人への配布（TestFlight 含む）
* オンラインギャラリーやSNS連携
* 多言語対応
* 課金・広告・サブスクリプション

これらは**「やらない前提」**とし、必要になった時点で再検討する。

---

## セキュリティ・プライバシーポリシー（自分向けメモ）

* 画像データはアプリのサンドボックス内か、ユーザーが明示的に指定したローカルディレクトリのみ。
* インターネット通信は基本禁止。もし導入する場合は、

  * 通信先
  * 送受信内容 を AGENT.md に追記して、自分で把握できる状態にしておく。

---

## テスト方針

* 対象デバイス：開発者が所有する iPad のみ
* 確認したいポイント：

  * 高解像度キャンバスでの描画レイテンシ
  * 10レイヤ以上使用した場合のメモリ使用量
  * Undo/Redo のレスポンス

自動テストは余裕があれば導入。最初は手動確認がメインでよい。

---

## 将来の検討メモ

* Metal ベースの独自ブラシエンジン
* 紙質テクスチャ（ざらざら/スムースなど）のプリセット
* レイヤマスクやクリッピングレイヤ
* 簡易アニメーション機能（コマ撮りレベル）
* PSD 互換エクスポート（必要性が高くなったら）

---

## 未来の自分へのメモ

* これは**自分専用のおもちゃ**兼ツール。楽しむことが最優先。
* 完璧を目指さず、「ちょっとずつ便利になる」ことを楽しむ。
* パフォーマンスで詰まったら、まず Instruments を開くこと。
